defmodule Exemvi.MPM.DataObject do
  @specification [
    %{code: "00", atom: :payload_format_indicator,                maxlen:  2, format: :num, mandatory: true },
    %{code: "01", atom: :point_of_initiation_method,              maxlen:  2, format: :num, mandatory: false},
    %{code: "02", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "03", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "04", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "05", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "06", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "07", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "08", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "09", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "10", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "11", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "12", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "13", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "14", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "15", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "16", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "17", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "18", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "19", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "20", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "21", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "22", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "23", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "24", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "25", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "26", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "27", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "28", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "29", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "30", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "31", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "32", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "33", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "34", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "35", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "36", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "37", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "38", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "39", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "40", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "41", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "42", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "43", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "44", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "45", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "46", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "47", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "48", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "49", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "50", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "51", atom: :merchant_account_information,            maxlen: 99, format: :ans, mandatory: true },
    %{code: "52", atom: :merchant_category_code,                  maxlen:  4, format: :num, mandatory: true },
    %{code: "53", atom: :transaction_currency,                    maxlen:  3, format: :num, mandatory: true },
    %{code: "54", atom: :transaction_amount,                      maxlen: 13, format: :ans, mandatory: false},
    %{code: "55", atom: :tip_or_convenience_indicator,            maxlen:  2, format: :num, mandatory: false},
    %{code: "56", atom: :value_of_convenience_fee_fixed,          maxlen: 13, format: :ans, mandatory: false},
    %{code: "57", atom: :value_of_convenience_fee_percentage,     maxlen:  5, format: :ans, mandatory: false},
    %{code: "58", atom: :country_code,                            maxlen:  2, format: :ans, mandatory: true },
    %{code: "59", atom: :merchant_name,                           maxlen: 25, format: :ans, mandatory: true },
    %{code: "60", atom: :merchant_city,                           maxlen: 15, format: :ans, mandatory: true },
    %{code: "61", atom: :postal_code,                             maxlen: 10, format: :ans, mandatory: false},
    %{code: "62", atom: :additional_data_field_template,          maxlen: 99, format: :str, mandatory: false},
    %{code: "63", atom: :crc,                                     maxlen:  4, format: :ans, mandatory: true },
    %{code: "64", atom: :merchant_information_language_template,  maxlen: 99, format: :str, mandatory: false},
    %{code: "65", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "66", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "67", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "68", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "69", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "70", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "71", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "72", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "73", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "74", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "75", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "76", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "77", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "78", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "79", atom: :rfu_for_emvco,                           maxlen: 99, format: :str, mandatory: false},
    %{code: "80", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "81", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "82", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "83", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "84", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "85", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "86", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "87", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "88", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "89", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "90", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "91", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "92", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "93", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "94", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "95", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "96", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "97", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "98", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false},
    %{code: "99", atom: :unreserved_template,                     maxlen: 99, format: :str, mandatory: false}
  ]

  def to_atom(raw_data_object) do
    found = Enum.find(@specification, fn x -> x[:code] == raw_data_object end)
    nil || found[:atom]
  end

  def mandatories() do
    @specification
    |> Enum.filter(fn x -> x[:mandatory] end)
    |> Enum.map(fn x -> x[:atom] end)
  end
end
